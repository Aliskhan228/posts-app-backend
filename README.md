# Medium Clone - Backend

Этот проект является backend частью клона Medium, реализующего аутентификацию, управление пользователями, постами и комментариями с поддержкой лайков. API обеспечивает все необходимые функции для полноценного взаимодействия с фронтендом.

## Функционал

### Пользователи
- **Авторизация и регистрация**: через email и пароль.
- **Изменение профиля**: пользователи могут обновлять аватарку, полное имя, описание, username, email и пароль.
- **Подтверждение email**: после регистрации или изменения email пользователям отправляется письмо с подтверждением.
- **Аутентификация по JWT**: токены обновляются через `/auth/refresh`.

### Посты
- **CRUD операции**: создание, чтение, обновление и удаление постов.
- **Лайки**: возможность ставить лайки на посты.

### Комментарии
- **CRUD операции**: добавление, редактирование, удаление комментариев.
- **Лайки для комментариев**: можно лайкать и комментарии.

## Технологии

Проект был реализован на основе следующих технологий:
- **Node.js**: среда выполнения JavaScript на сервере.
- **Express.js**: фреймворк для создания RESTful API.
- **MongoDB**: база данных NoSQL.
- **Mongoose**: ORM для работы с MongoDB.
- **JWT**: для авторизации и аутентификации.
- **bcrypt**: для хеширования паролей.
- **Multer**: для обработки загрузки файлов.
- **Nodemailer**: для отправки email.

## Структура проекта

```
├── api
   ├── controllers     # Логика обработки запросов
   ├── dtos            # Объекты передачи данных
   ├── exceptions      # Обработка ошибок
   ├── middlewares     # Миддлвары для валидации, авторизации и т.д.
   ├── models          # Модели MongoDB
   ├── router          # Маршруты приложения
   ├── services        # Бизнес-логика
   ├── validations     # Валидация запросов
   ├── index.js        # Основной файл для запуска сервера
├── uploads            # Хранение загруженных файлов (аватарки и изображения)
```

## API эндпоинты

### Auth Routes

- POST `/auth/register` — регистрация.
- POST `/auth/login` — вход в аккаунт.
- POST `/auth/logout` — выход из системы.
- GET `/auth/activate/:link` — активация аккаунта по ссылке.
- GET `/auth/refresh` — обновление JWT токена.
- PATCH `/profile/:id/update` — обновление профиля.
- PATCH `/profile/:id/change-password` — изменение пароля.

### Post Routes

- GET `/posts` — получить список всех постов.
- GET `/posts/:id` — получить пост по ID.
- POST `/posts` — создать новый пост.
- POST `/posts/:id/like` — лайкнуть пост.
- PATCH `/posts/:id` — обновить пост.
- DELETE `/posts/:id` — удалить пост.
- DELETE `/posts/:id/like` — удалить лайк.

### Comment Routes

- GET `/posts/:id/comments` — получить комментарии к посту.
- POST `/posts/:id/comments` — добавить комментарий.
- POST `/posts/:id/comments/:commentId/like` — лайкнуть комментарий.
- PATCH `/posts/:id/comments/:commentId` — обновить комментарий.
- DELETE `/posts/:id/comments/:commentId` — удалить комментарий.
- DELETE `/posts/:id/comments/:commentId/like` — удалить лайк с комментария.

## Frontend репозиторий

Для взаимодействия с этим backend можно использовать готовый frontend проект.

1. Клонировать репозиторий с frontend проектом можно по следующей ссылке: [Medium Clone - Frontend](https://github.com/Aliskhan228/medium-clone-frontend.git).

2. Тестировать в продакшене можно по следующему URL: [Production версия](https://newmedium.vercel.app).
